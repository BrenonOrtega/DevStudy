<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ex08 - gráfico de barras</title>

    <canvas width="600" height="400"></canvas>
</head>
<body>
    <script>
        /*possibilidade de melhora no código é a criação de uma classe "navegador" que já receberia os parametros de
        cor, porcentagem de utilização do navegador, para relacionar melhor os dados de cor e porcentagem em vez de arrays diferentes em um único objeto*/
        const tela = document.querySelector("canvas");
        const brush = tela.getContext("2d");

        //cores do gráfico
        const googleChrome = "blue";
        const firefox = "green";
        const safari = "yellow";
        const outros = "red";

        //definição das cores nos arrays.
        const cores = [googleChrome, firefox, safari,outros];


        //definicao das porcentagens de cada dado.
        const serie2015 = [50,25,20,5];
        const serie2016 = [65,20,13,2];

        function desenhaTexto(x, y, texto) {
            brush.font='15px Georgia';
            brush.fillStyle='black';
            brush.fillText(texto, x, y);    
        }


        const drawSquare = (x, y, cor, tamSerie) =>{
            brush.fillStyle = cor;
            brush.fillRect(x, y, 50, tamSerie);
        }

        const criaGrafico = (posX, inicioGrafico, corGrafico, tamanhoGrafico, texto) =>{
            let contagem = 0;
            let qtdElementos = tamanhoGrafico.length;
            while(contagem < qtdElementos){
                desenhaTexto(posX,10, texto);
                drawSquare(posX, inicioGrafico+15, corGrafico[contagem], tamanhoGrafico[contagem]);
                inicioGrafico=inicioGrafico+tamanhoGrafico[contagem];
                contagem ++;
                console.log(`inicioGrafico:${inicioGrafico}\r\n contagem:${contagem}\r\n tamanhoGrafico:${tamanhoGrafico[contagem]}`);
            }
            
        }

        criaGrafico(0, 0, cores, serie2015, "2015");
        criaGrafico(100,0, cores, serie2016, "2016");
    </script>
    
</body>
</html>