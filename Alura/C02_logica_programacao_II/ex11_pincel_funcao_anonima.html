<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Pincel com Funções Anonimas</title>
        <canvas width="600" height="400" id="canvas1"></canvas>
        <br>
        <p>Selecione uma cor abaixo:</p>
        <input type="color">
    </head>
    <body>
        <script>
            var tela = document.querySelector('canvas');
            var pincel = tela.getContext('2d');
            let corPincel = document.querySelector("input");
            let mousePressionado;
            
            pincel.fillStyle = 'grey';
            pincel.fillRect(0, 0, 600, 400);

            //funções anonimas atreladas diretamente ao evento.
            tela.onmousemove = function (evento) 
            {
                if (mousePressionado) {
                    var x = evento.pageX - tela.offsetLeft;
                    var y = evento.pageY - tela.offsetTop;
                    pincel.fillStyle = corPincel.value;
                    pincel.beginPath();
                    pincel.arc(x, y, 10, 0, 2 * 3.14);
                    pincel.fill();
                    console.log(x + ',' + y); 
                }
            } 
            
            tela.onmousedown = function()
            {
                mousePressionado = true;
            }

            tela.onmouseup = function(evento)
            {
                mousePressionado = false;
                tela.oncontextmenu = function(){return false;}
            
            }
        </script>
    </body>
</html>